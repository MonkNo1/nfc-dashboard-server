const express = require('express'); const router = express.Router(); router.post('/admin', (req, res) => { try { const { password } = req.body; if (!password) { return res.status(400).json({ success: false, message: 'Please provide a password' }); } if (password === process.env.ADMIN_PASSWORD) { return res.status(200).json({ success: true, token: process.env.ADMIN_TOKEN }); } return res.status(401).json({ success: false, message: 'Invalid credentials' }); } catch (err) { console.error(err); res.status(500).json({ success: false, message: 'Server error' }); } }); router.get('/verify', (req, res) => { try { const token = req.headers['admin-token']; if (token === process.env.ADMIN_TOKEN) { return res.status(200).json({ success: true, isValid: true }); } return res.status(200).json({ success: true, isValid: false }); } catch (err) { console.error(err); res.status(500).json({ success: false, message: 'Server error' }); } }); module.exports = router;
